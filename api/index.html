<!DOCTYPE html>
<head>
    <meta itemprop="name" content="防红接口直链--fanghong.zeabur.app"/>
    <meta itemprop="image" content="https://img-blog.csdnimg.cn/direct/ddb610a71d6b4b90a315c2d58aee2d6a.png" />
    <meta name="description" itemprop="description" content="即将进入网址" />
</head>
<body>
<script>
// 完全解密版本 - 模拟原始文件的完整行为

// 原始文件的字符串数组（解密后）
var stringArray = [
    'javascript:void(0);#',
    'href',
    'blur',
    'focus',
    'getElementsByTagName',
    'setAttribute',
    'getAttribute',
    'addEventListener',
    'oncontextmenu',
    'onselectstart',
    'onkeydown',
    'ctrlKey',
    'keyCode',
    'location',
    'self',
    'top',
    'getTime',
    'toString',
    'length',
    'onclick',
    'onfocus',
    'onblur',
    'body',
    'write'
];

// 解密函数（简化版）
function decryptString(index) {
    return stringArray[index];
}

// 存储原始链接的数组
var originalLinks = [];

// 页面加载前的处理函数
var preWindowLoad = window.onload;

// 主要的页面加载处理函数
window.onload = function() {
    // 如果之前有onload函数，先执行
    if (preWindowLoad != undefined) {
        preWindowLoad();
    }
    
    // 获取所有的a标签
    var linkElements = document.getElementsByTagName('a');
    
    // 遍历所有链接元素
    for (var i = 0; i < linkElements.length; i++) {
        // 只处理没有onclick事件的链接
        if (linkElements[i].onclick == undefined) {
            // 保存原始链接
            originalLinks[i] = linkElements[i].href;
            
            // 将链接替换为无效链接
            linkElements[i].href = 'javascript:void(0);#' + new Date().getTime().toString();
            
            // 设置索引属性
            linkElements[i].setAttribute('data-index', i);
            
            // 保存原始的onfocus事件
            var originalOnFocus = linkElements[i].onfocus;
            
            // 添加focus事件监听器 - 恢复真实链接
            linkElements[i].addEventListener('focus', function() {
                var index = this.getAttribute('data-index');
                this.href = originalLinks[index];
                if (originalOnFocus != undefined) {
                    originalOnFocus();
                }
            });
            
            // 保存原始的onblur事件
            var originalOnBlur = linkElements[i].onblur;
            
            // 添加blur事件监听器 - 重新隐藏链接
            linkElements[i].addEventListener('blur', function() {
                this.href = 'javascript:void(0);#' + new Date().getTime().toString();
                if (originalOnBlur != undefined) {
                    originalOnBlur();
                }
            });
        }
    }
};

// 禁用右键菜单
document.body.oncontextmenu = function() {
    return false;
};

// 禁用文本选择
document.body.onselectstart = function() {
    return false;
};

// 禁用特定快捷键
document.onkeydown = function(event) {
    var e = event || window.event;
    
    // 禁用Ctrl+C
    if (e.ctrlKey == 1 && e.keyCode == 67) {
        return false;
    }
    
    // 禁用Ctrl+S
    if (e.ctrlKey == 1 && e.keyCode == 83) {
        return false;
    }
    
    // 禁用F12
    if (e.keyCode == 123) {
        return false;
    }
};

// 防止在iframe中运行
if (window.top != window.self) {
    top.location.href = window.location.href;
}

// URL参数处理和跳转逻辑
(function() {
    // 获取URL参数
    var urlParams = new URLSearchParams(window.location.search);
    var targetUrl = urlParams.get('url') || urlParams.get('u');
    
    if (targetUrl) {
        // URL解码
        try {
            targetUrl = decodeURIComponent(targetUrl);
        } catch (e) {
            targetUrl = targetUrl;
        }
        
        // 验证URL格式
        if (targetUrl && (targetUrl.indexOf('http://') === 0 || targetUrl.indexOf('https://') === 0)) {
            // 延迟执行跳转，模拟原始文件的行为
            setTimeout(function() {
                // 使用document.write创建链接并触发点击，完全模拟原始行为
                var linkHtml = '<a id="redirectLink" href="' + targetUrl + '" style="display:none;"></a>';
                document.write(linkHtml);
                
                // 获取创建的链接并触发点击
                var link = document.getElementById('redirectLink');
                if (link) {
                    link.focus();
                    link.click();
                }
            }, 50);
        } else {
            // 错误处理
            document.write('<div style="text-align:center;margin-top:50px;font-family:Arial,sans-serif;">参数错误：无效的URL格式</div>');
        }
    }
})();

</script>
</body>
</html>
